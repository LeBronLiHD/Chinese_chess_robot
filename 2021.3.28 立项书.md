# 2021.3.28 立项书

&copy; 象棋机器人项目组（ZJU_Chinese_Chess_Robot_SRTP）

[TOC]



### 项目主要内容简介：

*（请填写项目主要内容简介，不超过200字）

象棋机器人旨在构建一款能够实现不同难度人机象棋对弈的智能化平台。

近年来机器人和人工智能技术发展迅猛，机器博弈——博弈论与机器人技术的结合，也在全球范围内得到了将近半世纪的发展，诞生了强如AlphaGo的代表性成果。

象棋普及性较高，拥有更大的潜在市场，也有助于弘扬中国优秀传统文化，锻炼思维。

象棋机器人项目 = 棋子识别模块 + 走法分析模块 + 走棋执行模块组成

##### 棋子识别（Chess Piece Recognition） = 图片处理 + 图像识别
   1. 图片处理可以使用OpenCV或者Python PIL + skimage库相关工具实现
   2. 图像识别计划通过基于CNN模型机器学习实现，添加数据增强模块
##### 走法分析（Chess Moves Analysis）
   1. 初步讨论计划使用alpha-beta剪枝算法，通过不同的搜索深度实现不同的对弈难度
   2. 另一种选择是通过学习职业象棋者的走棋套路，训练模型完成走法选择
##### 走棋执行（Chess Move Execution）
   1. 初步讨论计划使用机械臂控制走棋，通过嵌入式单片机实现与电脑对机械臂的控制
   2. 另一种选择是使用两台棋盘式小车，分别实现走棋与吃棋





### 项目负责人参与科研情况：

1. 中学阶段曾创作一篇水文[《挠性卫星的姿态控制算法》](https://oversea.cnki.net/KCMS/detail/detail.aspx?dbcode=CJFD&dbname=CJFDLASN2019&filename=QNSH201907107&v=bA1%25mmd2B4H%25mmd2B74GJ0%25mmd2FFxg5WKmcbO9cqBXwWJmyZ%25mmd2FxL%25mmd2FXzzebOPBpJMfQVjFg3CTyx2H39)，针对传统卫星姿态控制算法未考虑到挠性部件对于卫星姿态影响的问题，建模并设计了考虑了挠性附件影响的PID控制系统，仿真结果（MATLAB）达到预期。
2. 大一下学期参与智能工厂社团精品课《OpenCV图像处理》
3. 大二上学期参与智能工厂内训，熟悉SolidWorks、Arduino单片机的操作
4. 大二上学期通过课程大作业简单了解[图像处理](https://github.com/LeBronLiHD/ImageConvolutionProcess_Qt)与[机器学习（人脸识别方面）](https://github.com/LeBronLiHD/FaceRecognization_tensorflow_keras)





### 项目组成员参与科研情况：

*（项目组成员参与科研情况，不超过200字)

##### 靳 & 博

### 项目背景、目的及意义：

*（简要说明项目背景、意义和实施必要性，研究现状和发展动态，不超过1100字）

##### 博





### 项目研究方案：

*（包括项目的主要内容、**计划目标（靳）**和拟解决的问题，思路方法、组织实施及进度安排，不超过1200字）


##### 主要内容

主要内容：逐步实现图像识别、对弈决策算法、走棋机械臂或棋盘小车的设计，通信与较高精度控制；搭建一台能够实现人机象棋对弈的机械化平台

##### 计划目标（靳）

计划目标：搭建一台能够实现人机象棋对弈的机械化平台


##### 思路方法

思路方法：

1. 图像识别方面
   1. 图像处理：使用OpenCV或者Python PIL、skimage 库相关工具
      1. 通过圆形边缘检测实现棋子图片的棋子划取，可以使用OpenCV的Canny边缘检测 + HoughCircle变换（RHT）或者已有的基于Hough变换的圆形边缘检测算法比如对偶点检测等
      2. 灰度与二值化，为训练模型提供高质量数据
   2. 图像识别
      1. 数据增强
         1. 将每一个棋子的图片进行以1°为周期旋转处理（将得到360张图片）
         2. 水平偏移与垂直偏移
         3. 水平翻转与垂直翻转
         4. 去均值、归一化、白化、高斯平滑、对比度增强、卷积处理等
      2. CNN训练
         1. CNN：卷积神经网络是一种多层神经网络，擅长处理图像特别是大图像的相关机器学习问题。CNN通过卷积模拟特征区分，并且通过卷积的权值共享以及池化，来降低网络参数的数量级，最终完成分类工作
         2. 输入层：实现图像的预处理
         3. 卷积层：卷积的意义在于特征提取。N通道的输入在M个神经元的卷积处理后，经过激励函数得到输出，输出结果是M维的图像，每一维代表一种特征。卷积层的两大关键操作是局部关联与窗口滑动，局部关联将每一个神经元视作一个滤波器，窗口滑动则是使用滤波器对局部数据进行计算
         4. 激励层：激励层通过激活函数将卷积层的输出结果作非线性映射。这能够有效增强卷积神经网络的非线性，是输出结果更加贴近实际。常用的激励函数由RELU、Maxout、tanh等。其中RELU为最常用的激活函数，其特点是收敛快、求梯度简单、但是相对脆弱，当输入小于0时，激活函数为0；当输入大于零时，激活函数为其本身
         5. 池化层：池化层位于连接的卷积层中间，其目的在于对卷积层提取的特征进行降维，以减少整个神经网络的参数，池化层主要依赖于特征不变性，降维时去掉的特征大都是无关紧要的，而保留下来的具有尺度不变性的特征，才是最能表达图像的特征，常用的池化方法有最大池、平均池、加和池等
         6. 全连接层：全连接层将两层之间所有的神经元按权重连接，通常全连接层位于卷积神经网络的尾部，与传统的神经网络神经元的连接方式一致。经过几轮的卷积池化操作，可以认为图像中的信息已经被提取为“特征”，特征提取后，仍需要使用全连接层来完成分类任务
2. 对弈决策算法
   1. Maximin搜索算法
      1. 考虑到，象棋其实是在9*10的范围内进行下棋，在基本的规则内，其下法有限，可以对有限步数进行枚举
      2. Minimax算法蕴含一种对抗的思想，是一种找出失败的最大可能性中的最小值的算法即最小化对手的最大得益，通常以递归形式来实现。该算法是一个零总和算法，即一方要在可选的选项中选择将其优势最大化的选择，另一方则选择令对手优势最小化的一个，其输赢的总和为零
      3. Maximin算法的博弈树时Max层于Min层交替出现的，如果每一种棋局，都有可能的K中走法，假设搜索深度为D，则时间复杂度为：T = O(K^D^)
      4. 这里给出一个可能的总值计算公式：
         Utility = 将 \* 1000 + 车 \* 100 + 炮 \* 80 + 马 \* 60 + 士 \* 40 + 相 \* 40 + 兵 \* 15
   2. 基于Maximin算法的alpha-beta剪枝算法
      1. 该算法的主要目标是减小Maximin算法的搜索树的节点数量，当算法评估出某策略的后续走法比之前的策略还差时，就会停止改策略的后续发展
      2. 假设可能的走法为K，搜索深度为D，要评估的最大，即招法排序最差时的叶节点数目为O(K^D^)，于Maximin算法一致，若招法排序最优（即始终优先搜索最佳招法），则需要评估的最大叶节点数目按层数奇偶性，分别约为*O*(K \* 1 \* K \* ... \* 1)和O(1 \* K \* 1 \* ... \* K)，即O(K^D/2^)，由于节点生成顺序随机，实际需要评估的节点平均为O(K^3D/4^)
   3. 基于深度学习的走法决策算法：当计算机收到视觉模块发出的当前棋局信息，针对当前的棋局给出一个特定的走法，再将走法转换为棋盘小车与机械臂的控制指令，比如舵机的选择、转动方向、转动的速度与持续时间，最终实现走棋吃棋
3. 走起吃琪执行
   1. 机械臂执行：视觉模块将棋局信息传递给，电脑将对应的走法转化为机械臂控制指令递给机械臂控制电路，以实现机械臂的控制
   2. 棋盘小车执行：同上，电脑将得到的走法转化为小车的相应控制器与传感器的指令，指令传递给小车执行吃棋走棋的操作



##### 拟解决的问题：

1. 电脑与棋盘小车的通信方式，是否要通过第三方转接
2. 棋盘小车的尺寸控制问题，计划俯仰视尺寸为60*60，尤其是主动轮的尺寸控制问题
   1. 使用小尺寸舵机实现主动轮的小尺寸
   2. 使用机械传动装置实现舵机与主动轮的不共轴放置
3. 棋盘小车的机械设计问题，能否较为精巧地实现
   1. 高底盘小车的重心稳固问题
   2. 棋盘小车的电源供给问题
   3. 快速、有效的抓放象棋棋子并能把象棋棋子放置在指定位置的问题
4. 在人类下棋与棋局分析时棋盘小车的停放位置问题
   1. 初步讨论停在任意一个没有棋子的位置，但是人类就不可以将棋子下在那个地方
   2. 每次使用小车后将小车停放在最近的棋盘边缘
5. 棋盘小车的路径规划问题
   1. 计划使用虚拟轨道式路径规划，任意两点之间走直角路线
   2. 如果能够检测前方是否存在棋子，若无，则在子路径中执行直线路线
6. 棋盘小车的移位精度控制问题
   1. 使用红外检测获得小车与目标坐标的偏差，从而进行进一步的控制
   2. 使用视觉，将小车视为特殊的棋子，获得与目标位置的偏差，从而反馈控制
   3. 反馈控制的次数不宜过长，否则人类的等待时间过程影响体验
7. 对弈决策算法如何实现不同难度的切换
   1. 若使用极大极小算，搜索深度代表难度，但是搜索深度过大时计算时间较长
   2. 若使用深度学习的算法，不同的数据训练出的模型代表不同的难度
8. 视觉硬件与电脑之间的通信，除了单片机WiFi模块外是否还存在其他方式，如果采用算力强大的嵌入式系统是否可行
9. 是否使用机械臂的问题
10. 如果使用机械臂，则主要是控制精度的问题，目前没有自主拼搭机械臂的计划



##### 组织实施及进度安排时间线：

1. 2021.03.28~2021.04.09（答辩之前）：了解项目整体框架与各个模块功能，明确项目创新点，初步实现图像处理以及棋盘小车的SolidWorks建模
2. 2021.04.09~2021.04.25：完成图像识别模块的模型训练
3. 2021.04.25~2021.05.16：完成象棋棋盘的设计、识别模块的硬件搭建以及摄像头--嵌入式单片机--计算机的通信（识别模块将棋盘信息传递给电脑）
4. 2021.05.16~2021.06.20：实现对弈决策算法，并且计算机能够将合理结果回传
5. 2021.06.20~2021.07.18：实现小车的搭建，以及小车与计算机的通信（计算机将走法指令传递给小车，采用计算机--小车单片机--小车或者计算机--嵌入式单片机--小车单片机--小车），使用计算机测试小车的性能并进行改进
6. 2021.07.18~2021.08.08：基本实现象棋机器人样机搭建



### 项目研究条件及创新之处：

*（==已有研究基础，包含与项目有关的研究积累、已取得的成绩和已具备的条件==，尚缺少的条件及解决办法，项目优势和风险，以及项目创新点等，不超500字）

##### 靳
##### 创新点

1. 机械臂抓手物理性状创新（三根机械手指）
2. 机械臂控制精度创新（机械臂控制算法创新）
3. 上位机的创新（使用算力强大的嵌入式系统执行对弈决策算法与机械臂控制）
4. 对弈决策算法的创新（如何在alpha-beta剪枝算法的基础上使用机器学习）
5. 图像处理的创新（比如不使用受光线影响较大的RGB采用HSV）
6. 不同的难度（简易、中等、难）
7. 在象棋棋子下面嵌入式小型轮式机器人
8. 使用较大的象棋棋盘，在上面使用一个轮式机器人，在机械臂故障的时候使用此方案
   1. 抓棋：磁铁 + 抓手
   2. 识别的时候，停在没有棋子的地方（把小车视为一个棋子）
   3. 主动轮问题：使用超小型舵机，轮子尺寸够小，或者机械传动
   4. 位置精度问题：局部红外检测 + 反馈（坐标反馈 + 调节控制）





### 项目预期成果

*（包括知识产权成果，如论文成果、获奖成果、评议鉴定成果、推广成果、论著成果、专利成果、、研制产品、开发软件，与毕设、学科竞赛等其他学习环节结合情况，或其他成果等，以及经济效益、社会效益等，不超130字）

##### 预期论著、软件成果 + 竞赛报名

1. 使用棋盘小车执行走棋吃棋的象棋机器人以及棋盘小车的机械设计论文与专利
   1. 成本大幅降低
   2. 灵活性，一个小车坏掉了换一个小车可以继续工作，而不用更换整个象棋机器人
   3. 控制精度
   4. 机械设计创意性
2. 整体象棋机器人的外观设计论文与专利
3. 使用Qt Creator创作针对对弈决策算法以及实现两辆小车联合控制的仿真软件，视情况决定是否申请软件著作权
4. 计划参加2021三菱自动化大赛，或者2022届

##### 经济效益 + 社会效益（博）